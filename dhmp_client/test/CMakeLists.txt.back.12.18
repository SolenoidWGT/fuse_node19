# aux_source_directory(. DIR_SRCS)
set (CLIENT_SRCS1 client_zipf.c)
set (CLIENT_SRCS2 client_avg.c)
set (CLIENT_SRCS3 client_mixed_zipf.c)
set (CLIENT_SRCS4 client_mixed_avg.c)

set (SERVER_SRCS server.c)
# set (WATCHER_SRCS watcher.c)

#set (CMAKE_CXX_FLAGS "-Wall -lxml2 -lrdmacm -libverbs -lpthread -lnuma -lrt -lm")

set (EXECUTABLE_OUTPUT_PATH ${DHMP_SOURCE_DIR}/bin)

# 指定生成目标
add_executable(client_zipf ${CLIENT_SRCS1})
add_executable(client_avg ${CLIENT_SRCS2})
add_executable(client_mixed_zipf ${CLIENT_SRCS3})
add_executable(client_mixed_avg ${CLIENT_SRCS4})

add_executable(server ${SERVER_SRCS})
add_executable(watcher ${WATCHER_SRCS})

# 添加链接库
target_link_libraries(client_zipf dhmp)
target_link_libraries(client_zipf xml2)
target_link_libraries(client_zipf pthread)
target_link_libraries(client_zipf rdmacm)
target_link_libraries(client_zipf ibverbs)
target_link_libraries(client_zipf numa)
target_link_libraries(client_zipf rt)
target_link_libraries(client_zipf m)
target_link_libraries(client_zipf json-c)

target_link_libraries(client_avg dhmp)
target_link_libraries(client_avg xml2)
target_link_libraries(client_avg pthread)
target_link_libraries(client_avg rdmacm)
target_link_libraries(client_avg ibverbs)
target_link_libraries(client_avg numa)
target_link_libraries(client_avg rt)
target_link_libraries(client_avg m)
target_link_libraries(client_avg json-c)

target_link_libraries(client_mixed_zipf dhmp)
target_link_libraries(client_mixed_zipf xml2)
target_link_libraries(client_mixed_zipf pthread)
target_link_libraries(client_mixed_zipf rdmacm)
target_link_libraries(client_mixed_zipf ibverbs)
target_link_libraries(client_mixed_zipf numa)
target_link_libraries(client_mixed_zipf rt)
target_link_libraries(client_mixed_zipf m)
target_link_libraries(client_mixed_zipf json-c)

target_link_libraries(client_mixed_avg dhmp)
target_link_libraries(client_mixed_avg xml2)
target_link_libraries(client_mixed_avg pthread)
target_link_libraries(client_mixed_avg rdmacm)
target_link_libraries(client_mixed_avg ibverbs)
target_link_libraries(client_mixed_avg numa)
target_link_libraries(client_mixed_avg rt)
target_link_libraries(client_mixed_avg m)
target_link_libraries(client_mixed_avg json-c)

target_link_libraries(server dhmp)
target_link_libraries(server xml2)
target_link_libraries(server pthread)
target_link_libraries(server rdmacm)
target_link_libraries(server ibverbs)
target_link_libraries(server numa)
target_link_libraries(server rt)
target_link_libraries(server m)
target_link_libraries(server json-c)

target_link_libraries(watcher dhmp)
target_link_libraries(watcher xml2)
target_link_libraries(watcher pthread)
target_link_libraries(watcher rdmacm)
target_link_libraries(watcher ibverbs)
target_link_libraries(watcher numa)
target_link_libraries(watcher rt)
target_link_libraries(watcher m)
target_link_libraries(watcher json-c)


